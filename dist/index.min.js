
/*!
* Sesam 5.3.2 - https://github.com/lennertderyck/sesam
* Licensed under the GNU GPLv3 license - https://choosealicense.com/licenses/gpl-3.0/#
*
* Copyright (c) 2020 Lennert De Ryck
*/

const sesamCollapse={initialize(){console.log("\n%c[service] sesam.js initialize() running! \n ","color: #00d400; font-weight: bold"),console.log("%c[service] initialize()","font-weight: bold"),this.cache(),this.listen(),this.domSetup(this.triggers),this.domSetup(this.targets),null==this.backdrop&&this.addBackdrop()},listen(){document.body.addEventListener("click",s=>{const e=s.target.closest("[data-sesam-trigger]");if(null!=e){this.collapse(e),document.querySelectorAll(`[data-sesam-target="${e.dataset.sesamTrigger}"]`).forEach(s=>{this.collapse(s)})}})},cache(){this.triggers=document.querySelectorAll("[data-sesam-trigger]"),this.targets=document.querySelectorAll("[data-sesam-target]"),this.backdrop=document.querySelector('[data-label="sesamBackdrop"]')},domSetup(s){s.forEach(s=>{(s=s.classList).contains("sesam")||s.add("sesam"),s.contains("sesam-hidden")||s.contains("sesam-show")||s.add("sesam-hidden")})},collapse(s){const e=this.itemState(s);1==e?this.itemShow(s):this.itemHide(s),null!=s.dataset.sesamTarget&&1==e?("true"==s.dataset.sesamBackdrop&&this.itemShow(this.backdrop),"true"==s.dataset.sesamScrollblock&&this.scrollBlock({block:!0}),null!=s.dataset.sesamParent&&this.hideOtherChildren(s),null!=s.dataset.sesamOptions&&(this.targetOptions(s),"true"==this.optionsMap.get("backdrop")&&this.itemShow(this.backdrop),"true"==this.optionsMap.get("scrollBlock")&&this.scrollBlock({block:!0}))):null!=s.dataset.sesamTarget&&0==e&&(this.itemHide(this.backdrop),this.scrollBlock({block:!1}))},itemState:s=>s.classList.contains("sesam-hidden"),targetOptions(s){const e=s.dataset.sesamOptions.split(",");this.optionsMap=new Map,e.forEach(s=>{s=s.split(":"),this.optionsMap.set(s[0].replace(" ",""),s[1])})},hideOtherChildren(s){document.querySelectorAll(`[data-sesam-group="${s.dataset.sesamParent}"] .sesam:not([data-sesam-target="${s.dataset.sesamTarget}"]):not([data-sesam-trigger="${s.dataset.sesamTarget}"])`).forEach(s=>{this.itemHide(s)})},itemHide(s){s.classList.remove("sesam-show"),s.classList.add("sesam-hidden")},itemShow(s){s.classList.add("sesam-show"),s.classList.remove("sesam-hidden")},addBackdrop(){this.backdrop=document.createElement("div"),this.backdrop.setAttribute("data-label","sesamBackdrop"),this.backdrop.classList.add("sesam","sesam-hidden","sesam-backdrop"),document.body.appendChild(this.backdrop)},scrollBlock({block:s}){1==s?document.body.classList.add("sesam-scrollBlock"):document.body.classList.remove("sesam-scrollBlock")}},sesam=({action:s,collapse:e,execute:t,classes:a,target:o,modal:l})=>{o=document.querySelector(`[data-sesam-target='${o}']`),null!=s&&"show"==s&&sesamCollapse.itemShow(o),null!=s&&"hide"==s&&sesamCollapse.itemHide(o),null!=e&&1==e&&sesamCollapse.collapse(o),null!=l&&void 0!==l.backdrop&&(1==l.backdrop&&sesamCollapse.itemShow(sesamCollapse.backdrop),0==l.backdrop&&sesamCollapse.itemHide(sesamCollapse.backdrop)),null!=l&&void 0!==l.scrollBlock&&(1==l.scrollBlock&&sesamCollapse.scrollBlock({block:!0}),0==l.scrollBlock&&sesamCollapse.scrollBlock({block:!1}))};export{sesamCollapse,sesam};